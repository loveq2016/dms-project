<?xml version="1.0" encoding="UTF-8" ?>  
    <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SystemUser">
<!-- 用户管理 start -->
	<sql id="adsWhere">
		<trim prefix="WHERE" prefixOverrides="AND|OR">
			<if test="@com.yijava.orm.core.OgnlUtils@isNotEmpty(account)">
				  and account=#{account}
			</if>
			<if test="@com.yijava.orm.core.OgnlUtils@isNotEmpty(realname)">
				  and realname=#{realname}
			</if>
		</trim>
	</sql>
	<sql id="adsOrder">
		<choose>
		    <when test="@com.yijava.orm.core.OgnlUtils@isNotEmpty(orderSql)">  
		         ORDER BY ${orderSql}
		    </when>
		    <otherwise>
		    </otherwise>
	    </choose>
	</sql>
    <select id="selectByObjectcount" resultType="long">
		select count(*) from dms.tb_manager_user 
		<include refid="adsWhere"/>
	</select>
 	<select id="selectByObject" resultType="dms.yijava.entity.system.SysUser">
		select * from dms.tb_manager_user 
		<include refid="adsWhere"/>
		<include refid="adsOrder"/>
	    limit #{offset},#{pagesize}
	</select>
	<select id="select"  parameterType="int" resultType="dms.yijava.entity.system.SysUser">
        select * from dms.tb_manager_user where account = #{account}
    </select>
	<insert id="insert" parameterType="dms.yijava.entity.system.SysUser">     
		insert into dms.tb_manager_user (account,realname,password,email,type,birthday,sex,phone,
		province,address,postcode,fk_department_id,fk_dealer_id,isdeleted,create_time,last_time,remark,
		customfield1,customfield2,customfield3,ext1,ext2,ext3)values(#{account},#{realname},#{password},#{email},#{type},#{birthday},#{sex},#{phone},
		#{province},#{address},#{postcode},#{fk_department_id},#{fk_dealer_id},#{isdeleted},NOW(),NOW(),#{remark},
		#{customfield1},#{customfield2},#{customfield3},#{ext1},#{ext2},#{ext3});
	</insert>
    <update id="update" parameterType="dms.yijava.entity.system.SysUser">
    	update dms.tb_manager_user set realname=#{realname},password=#{password},email=#{email},type=#{type},birthday=#{birthday},sex=#{sex},phone=#{phone},
		province=#{province},address=#{address},postcode=#{postcode},fk_department_id=#{fk_department_id},fk_dealer_id=#{fk_dealer_id},isdeleted=#{isdeleted},last_time=NOW(),remark=#{remark},
		customfield1=#{customfield1},customfield2=#{customfield2},customfield3=#{customfield3},ext1=#{ext1},ext2=#{ext2},ext3=#{ext3} where id=#{id}
    </update>
<!-- 用户管理  end -->
</mapper>